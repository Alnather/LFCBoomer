{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Hani/ForesterSwap/pages/verify-email.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport Link from \"next/link\";\r\nimport { sendEmailVerification, onAuthStateChanged } from \"firebase/auth\";\r\nimport { auth } from \"@/lib/firebase\";\r\n\r\nexport default function VerifyEmail() {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [resending, setResending] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\r\n      if (!currentUser) {\r\n        // Not logged in, redirect to login\r\n        router.push(\"/login\");\r\n      } else if (currentUser.emailVerified) {\r\n        // Already verified, redirect to home\r\n        router.push(\"/\");\r\n      } else {\r\n        setUser(currentUser);\r\n        setLoading(false);\r\n      }\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [router]);\r\n\r\n  async function handleResendVerification() {\r\n    if (!user) return;\r\n    \r\n    setError(\"\");\r\n    setMessage(\"\");\r\n    setResending(true);\r\n\r\n    try {\r\n      await sendEmailVerification(user);\r\n      setMessage(\"Verification email sent! Please check your inbox.\");\r\n    } catch (err) {\r\n      setError(err.message || \"Failed to resend verification email\");\r\n    } finally {\r\n      setResending(false);\r\n    }\r\n  }\r\n\r\n  async function handleCheckVerification() {\r\n    if (!user) return;\r\n\r\n    try {\r\n      await user.reload();\r\n      if (user.emailVerified) {\r\n        setMessage(\"Email verified! Redirecting...\");\r\n        setTimeout(() => router.push(\"/\"), 2000);\r\n      } else {\r\n        setError(\"Email not verified yet. Please check your inbox and click the verification link.\");\r\n      }\r\n    } catch (err) {\r\n      setError(\"Failed to check verification status\");\r\n    }\r\n  }\r\n\r\n  async function handleLogout() {\r\n    await auth.signOut();\r\n    router.push(\"/login\");\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center gradient-bg\">\r\n        <div className=\"text-gray-300\">Loading...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\" flex items-center justify-center bg-[#171717] py-12 px-4 custom-app-layout-mobile\"  style={{minHeight:\"80vh\"}} >\r\n      <div className=\"bg-[#171717] border border-white/10 p-8 rounded-2xl shadow-xl w-full max-w-md\" style={{alignSelf:\"center\",padding:\"2vw\"}} >\r\n        <div className=\"text-center mb-8\">\r\n          <Link href=\"/\" className=\"inline-block mb-4\">\r\n            <h1 className=\"text-3xl font-bold text-white\" >Verify Your Email</h1>\r\n          </Link>\r\n          <p className=\"text-gray-400\" style={{marginBottom:\"6vh\"}}>Check your inbox to continue</p>\r\n        </div>\r\n\r\n        <div className=\"space-y-5\">\r\n          <div style={{textAlign:\"center\"}} className=\"bg-blue-500/10 border border-blue-500/30 text-blue-400 px-4 py-4 rounded-xl\">\r\n            <p className=\"text-sm\">\r\n              A verification email has been sent to:\r\n            </p>\r\n            <p className=\"font-semibold mt-2 text-white\">{user?.email}</p>\r\n            <p className=\"text-sm mt-3\">\r\n              Please check your inbox and click the verification link to activate your account.\r\n            </p>\r\n          </div>\r\n\r\n          {message && (\r\n            <div className=\"bg-green-500/10 border border-green-500/30 text-green-400 px-4 py-3 rounded-xl text-sm\">\r\n              {message}\r\n            </div>\r\n          )}\r\n\r\n          {error && (\r\n            <div className=\"bg-red-500/10 border border-red-500/30 text-red-400 px-4 py-3 rounded-xl text-sm\">\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          <button\r\n            onClick={handleCheckVerification}\r\n            style={{height:\"5vh\",marginTop:\"3vh\",marginBottom:\"1vh\"}}\r\n            className=\"w-full py-3 px-4 bg-gradient-to-r from-primary to-accent hover:from-primary-dark hover:to-primary text-white font-semibold rounded-xl transition-all\"\r\n          >\r\n            I've Verified My Email\r\n          </button>\r\n\r\n          <button\r\n            onClick={handleResendVerification}\r\n            disabled={resending}\r\n            style={{height:\"5vh\",marginBottom:\"3vh\"}}\r\n            className=\"w-full py-3 px-4 bg-white/10 hover:bg-white/20 disabled:bg-white/5 disabled:text-gray-600 text-white font-semibold rounded-xl transition-all border border-white/10 disabled:cursor-not-allowed\"\r\n          >\r\n            {resending ? \"Sending...\" : \"Resend Verification Email\"}\r\n          </button>\r\n\r\n          <div className=\"pt-4 border-t border-white/10\">\r\n            <button\r\n              onClick={handleLogout}\r\n              className=\"w-full py-2 px-4 text-gray-400 hover:text-white transition-colors font-medium\"\r\n            >\r\n              Sign out\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}