{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Hani/ForesterSwap/pages/create-listing.jsx"],"sourcesContent":["import { useState, useRef } from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport { motion } from \"framer-motion\";\r\nimport { FiCamera, FiX, FiDollarSign, FiMapPin, FiCheck } from \"react-icons/fi\";\r\nimport { FaWhatsapp } from \"react-icons/fa\";\r\nimport { collection, addDoc, doc, updateDoc, arrayUnion } from \"firebase/firestore\";\r\nimport { db } from \"@/lib/firebase\";\r\n\r\nexport default function CreateListing({ user, loading }) {\r\n  const [title, setTitle] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [price, setPrice] = useState(\"\");\r\n  const [category, setCategory] = useState(\"\");\r\n  const [condition, setCondition] = useState(\"good\");\r\n  const [location, setLocation] = useState(\"\");\r\n  const [whatsappNumber, setWhatsappNumber] = useState(\"\");\r\n  const [enableWhatsapp, setEnableWhatsapp] = useState(false);\r\n  const [image, setImage] = useState(null);\r\n  const [imagePreview, setImagePreview] = useState(null);\r\n  const [error, setError] = useState(\"\");\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [step, setStep] = useState(1); // 1: Photo, 2: Details, 3: Contact\r\n  const router = useRouter();\r\n  const fileInputRef = useRef(null);\r\n\r\n  const categories = [\r\n    { id: \"electronics\", label: \"Electronics\", emoji: \"üì±\" },\r\n    { id: \"books\", label: \"Books\", emoji: \"üìö\" },\r\n    { id: \"furniture\", label: \"Furniture\", emoji: \"ü™ë\" },\r\n    { id: \"clothing\", label: \"Clothing\", emoji: \"üëï\" },\r\n    { id: \"sports\", label: \"Sports\", emoji: \"‚öΩ\" },\r\n    { id: \"toys\", label: \"Games\", emoji: \"üéÆ\" },\r\n    { id: \"home\", label: \"Home\", emoji: \"üè†\" },\r\n    { id: \"other\", label: \"Other\", emoji: \"üì¶\" },\r\n  ];\r\n\r\n  const conditions = [\r\n    { id: \"new\", label: \"New\", desc: \"Brand new, unused\" },\r\n    { id: \"like-new\", label: \"Like New\", desc: \"Barely used, excellent\" },\r\n    { id: \"good\", label: \"Good\", desc: \"Minor wear, works great\" },\r\n    { id: \"fair\", label: \"Fair\", desc: \"Shows wear, functional\" },\r\n  ];\r\n\r\n  const commonLocations = [\r\n    \"West Campus\",\r\n    \"East Campus\", \r\n    \"North Campus\",\r\n    \"South Campus\",\r\n    \"Library\",\r\n    \"Student Center\",\r\n    \"Gym\",\r\n  ];\r\n\r\n  function handleImageChange(e) {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        const img = new Image();\r\n        img.onload = () => {\r\n          const canvas = document.createElement('canvas');\r\n          const ctx = canvas.getContext('2d');\r\n          \r\n          let width = img.width;\r\n          let height = img.height;\r\n          const maxSize = 800;\r\n          \r\n          if (width > height) {\r\n            if (width > maxSize) {\r\n              height = (height * maxSize) / width;\r\n              width = maxSize;\r\n            }\r\n          } else {\r\n            if (height > maxSize) {\r\n              width = (width * maxSize) / height;\r\n              height = maxSize;\r\n            }\r\n          }\r\n          \r\n          canvas.width = width;\r\n          canvas.height = height;\r\n          ctx.drawImage(img, 0, 0, width, height);\r\n          \r\n          const compressedDataUrl = canvas.toDataURL('image/jpeg', 0.7);\r\n          \r\n          setImage(file);\r\n          setImagePreview(compressedDataUrl);\r\n          setStep(2); // Auto-advance to details\r\n        };\r\n        img.src = reader.result;\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  }\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n\r\n    if (!user) {\r\n      setError(\"You must be logged in to create a listing\");\r\n      return;\r\n    }\r\n\r\n    if (!imagePreview) {\r\n      setError(\"Please add a photo of your item\");\r\n      return;\r\n    }\r\n\r\n    if (!title.trim()) {\r\n      setError(\"Please add a title\");\r\n      return;\r\n    }\r\n\r\n    if (!category) {\r\n      setError(\"Please select a category\");\r\n      return;\r\n    }\r\n\r\n    if (enableWhatsapp && !whatsappNumber.trim()) {\r\n      setError(\"Please enter your WhatsApp number or disable WhatsApp contact\");\r\n      return;\r\n    }\r\n\r\n    setSubmitting(true);\r\n\r\n    try {\r\n      const listingData = {\r\n        title: title.trim(),\r\n        description: description.trim(),\r\n        price: price ? parseFloat(price) : 0,\r\n        category,\r\n        condition,\r\n        location: location.trim(),\r\n        whatsappNumber: enableWhatsapp ? whatsappNumber.trim() : null,\r\n        photo: imagePreview,\r\n        userId: user.uid,\r\n        userName: user.displayName || \"Anonymous\",\r\n        userEmail: user.email,\r\n        status: \"active\",\r\n        createdAt: new Date().toISOString(),\r\n        updatedAt: new Date().toISOString(),\r\n        views: 0,\r\n        bumps: 0,\r\n      };\r\n\r\n      const docRef = await addDoc(collection(db, \"listings\"), listingData);\r\n\r\n      // Add listing reference to user's listings array\r\n      try {\r\n        await updateDoc(doc(db, \"Users\", user.uid), {\r\n          listings: arrayUnion(docRef.id),\r\n        });\r\n      } catch (updateErr) {\r\n        console.log(\"Could not update user listings array:\", updateErr);\r\n      }\r\n\r\n      router.push(\"/marketplace\");\r\n    } catch (err) {\r\n      console.error(\"Error creating listing:\", err);\r\n      setError(err.message || \"Failed to create listing\");\r\n      setSubmitting(false);\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"w-16 h-16 border-4 border-primary/30 border-t-primary rounded-full animate-spin\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h1 className=\"text-2xl font-bold text-white mb-4\">Please Log In</h1>\r\n          <p className=\"text-gray-400 mb-6\">You need to be logged in to create a listing</p>\r\n          <a href=\"/login\" className=\"px-6 py-3 bg-primary text-white rounded-xl font-medium\">\r\n            Log In\r\n          </a>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen pb-24\">\r\n      <div className=\"max-w-lg mx-auto\">\r\n        {/* Progress Indicator */}\r\n        <div className=\"flex items-center justify-center gap-2 mb-6\">\r\n          {[1, 2, 3].map((s) => (\r\n            <div\r\n              key={s}\r\n              className={`h-1.5 rounded-full transition-all duration-300 ${\r\n                s <= step ? 'w-12 bg-primary' : 'w-8 bg-white/10'\r\n              }`}\r\n            />\r\n          ))}\r\n        </div>\r\n\r\n        {/* Step 1: Photo */}\r\n        {step === 1 && (\r\n          <motion.div\r\n            initial={{ opacity: 0, x: -20 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            className=\"text-center\"\r\n          >\r\n            <h1 className=\"text-2xl font-bold text-white mb-2\">Add a Photo</h1>\r\n            <p className=\"text-gray-400 mb-8\">A good photo helps sell faster</p>\r\n\r\n            <input\r\n              ref={fileInputRef}\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              onChange={handleImageChange}\r\n              className=\"hidden\"\r\n            />\r\n\r\n            <button\r\n              onClick={() => fileInputRef.current?.click()}\r\n              className=\"w-full aspect-square max-w-sm mx-auto bg-white/5 border-2 border-dashed border-white/20 rounded-2xl flex flex-col items-center justify-center hover:border-primary/50 hover:bg-white/10 transition-all cursor-pointer\"\r\n            >\r\n              <div className=\"w-20 h-20 rounded-full bg-primary/20 flex items-center justify-center mb-4\">\r\n                <FiCamera size={32} className=\"text-primary\" />\r\n              </div>\r\n              <span className=\"text-white font-medium mb-1\">Tap to add photo</span>\r\n              <span className=\"text-gray-500 text-sm\">JPG, PNG up to 10MB</span>\r\n            </button>\r\n          </motion.div>\r\n        )}\r\n\r\n        {/* Step 2: Details */}\r\n        {step === 2 && (\r\n          <motion.div\r\n            initial={{ opacity: 0, x: 20 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n          >\r\n            <div className=\"flex items-center gap-4 mb-6\">\r\n              <button\r\n                onClick={() => setStep(1)}\r\n                className=\"text-gray-400 hover:text-white transition-colors\"\r\n              >\r\n                ‚Üê Back\r\n              </button>\r\n              <h1 className=\"text-xl font-bold text-white\">Item Details</h1>\r\n            </div>\r\n\r\n            {/* Photo Preview */}\r\n            {imagePreview && (\r\n              <div className=\"relative mb-6\">\r\n                <img\r\n                  src={imagePreview}\r\n                  alt=\"Preview\"\r\n                  className=\"w-full h-48 object-cover rounded-2xl\"\r\n                />\r\n                <button\r\n                  onClick={() => {\r\n                    setImage(null);\r\n                    setImagePreview(null);\r\n                    setStep(1);\r\n                  }}\r\n                  className=\"absolute top-2 right-2 p-2 bg-black/50 rounded-full text-white hover:bg-black/70 transition-colors\"\r\n                >\r\n                  <FiX size={18} />\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            <form className=\"space-y-5\">\r\n              {/* Title */}\r\n              <div>\r\n                <input\r\n                  type=\"text\"\r\n                  value={title}\r\n                  onChange={(e) => setTitle(e.target.value)}\r\n                  placeholder=\"What are you selling?\"\r\n                  className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-primary/50 text-lg\"\r\n                  maxLength={80}\r\n                />\r\n                <p className=\"text-right text-xs text-gray-500 mt-1\">{title.length}/80</p>\r\n              </div>\r\n\r\n              {/* Price */}\r\n              <div className=\"relative\">\r\n                <FiDollarSign className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\r\n                <input\r\n                  type=\"number\"\r\n                  value={price}\r\n                  onChange={(e) => setPrice(e.target.value)}\r\n                  placeholder=\"Price (0 for free)\"\r\n                  className=\"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-primary/50\"\r\n                  min=\"0\"\r\n                  step=\"0.01\"\r\n                />\r\n              </div>\r\n\r\n              {/* Category */}\r\n              <div>\r\n                <label className=\"text-sm text-gray-400 mb-2 block\">Category</label>\r\n                <div className=\"grid grid-cols-4 gap-2\">\r\n                  {categories.map((cat) => (\r\n                    <button\r\n                      key={cat.id}\r\n                      type=\"button\"\r\n                      onClick={() => setCategory(cat.id)}\r\n                      className={`p-3 rounded-xl text-center transition-all ${\r\n                        category === cat.id\r\n                          ? 'bg-primary/20 border-2 border-primary'\r\n                          : 'bg-white/5 border border-white/10 hover:bg-white/10'\r\n                      }`}\r\n                    >\r\n                      <span className=\"text-2xl block mb-1\">{cat.emoji}</span>\r\n                      <span className={`text-xs ${category === cat.id ? 'text-primary' : 'text-gray-400'}`}>\r\n                        {cat.label}\r\n                      </span>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Condition */}\r\n              <div>\r\n                <label className=\"text-sm text-gray-400 mb-2 block\">Condition</label>\r\n                <div className=\"grid grid-cols-2 gap-2\">\r\n                  {conditions.map((cond) => (\r\n                    <button\r\n                      key={cond.id}\r\n                      type=\"button\"\r\n                      onClick={() => setCondition(cond.id)}\r\n                      className={`p-3 rounded-xl text-left transition-all ${\r\n                        condition === cond.id\r\n                          ? 'bg-primary/20 border-2 border-primary'\r\n                          : 'bg-white/5 border border-white/10 hover:bg-white/10'\r\n                      }`}\r\n                    >\r\n                      <span className={`font-medium ${condition === cond.id ? 'text-white' : 'text-gray-300'}`}>\r\n                        {cond.label}\r\n                      </span>\r\n                      <p className=\"text-xs text-gray-500\">{cond.desc}</p>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Description */}\r\n              <div>\r\n                <textarea\r\n                  value={description}\r\n                  onChange={(e) => setDescription(e.target.value)}\r\n                  placeholder=\"Add more details (optional)\"\r\n                  className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-primary/50 resize-none\"\r\n                  rows={3}\r\n                  maxLength={500}\r\n                />\r\n              </div>\r\n\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setStep(3)}\r\n                disabled={!title.trim() || !category}\r\n                className=\"w-full py-3 bg-gradient-to-r from-primary to-red-500 text-white font-semibold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg hover:shadow-primary/20 transition-all\"\r\n              >\r\n                Continue\r\n              </button>\r\n            </form>\r\n          </motion.div>\r\n        )}\r\n\r\n        {/* Step 3: Contact & Location */}\r\n        {step === 3 && (\r\n          <motion.div\r\n            initial={{ opacity: 0, x: 20 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n          >\r\n            <div className=\"flex items-center gap-4 mb-6\">\r\n              <button\r\n                onClick={() => setStep(2)}\r\n                className=\"text-gray-400 hover:text-white transition-colors\"\r\n              >\r\n                ‚Üê Back\r\n              </button>\r\n              <h1 className=\"text-xl font-bold text-white\">Contact & Location</h1>\r\n            </div>\r\n\r\n            {error && (\r\n              <div className=\"mb-4 p-3 bg-red-500/10 border border-red-500/30 rounded-xl text-red-400 text-sm\">\r\n                {error}\r\n              </div>\r\n            )}\r\n\r\n            <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n              {/* Location */}\r\n              <div>\r\n                <label className=\"text-sm text-gray-400 mb-2 block\">\r\n                  <FiMapPin className=\"inline mr-1\" size={14} />\r\n                  Pickup Location (optional)\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={location}\r\n                  onChange={(e) => setLocation(e.target.value)}\r\n                  placeholder=\"e.g., West Campus, Library\"\r\n                  className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-primary/50\"\r\n                />\r\n                <div className=\"flex flex-wrap gap-2 mt-2\">\r\n                  {commonLocations.map((loc) => (\r\n                    <button\r\n                      key={loc}\r\n                      type=\"button\"\r\n                      onClick={() => setLocation(loc)}\r\n                      className={`px-3 py-1 rounded-full text-xs transition-all ${\r\n                        location === loc\r\n                          ? 'bg-primary text-white'\r\n                          : 'bg-white/5 text-gray-400 hover:bg-white/10'\r\n                      }`}\r\n                    >\r\n                      {loc}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* WhatsApp Toggle */}\r\n              <div className=\"p-4 bg-white/5 border border-white/10 rounded-xl\">\r\n                <div className=\"flex items-center justify-between mb-3\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div className=\"w-10 h-10 rounded-full bg-green-500/20 flex items-center justify-center\">\r\n                      <FaWhatsapp size={20} className=\"text-green-500\" />\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-white font-medium\">WhatsApp Contact</p>\r\n                      <p className=\"text-xs text-gray-500\">Let buyers message you on WhatsApp</p>\r\n                    </div>\r\n                  </div>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setEnableWhatsapp(!enableWhatsapp)}\r\n                    className={`w-12 h-6 rounded-full transition-colors ${\r\n                      enableWhatsapp ? 'bg-green-500' : 'bg-white/20'\r\n                    }`}\r\n                  >\r\n                    <div\r\n                      className={`w-5 h-5 rounded-full bg-white shadow transition-transform ${\r\n                        enableWhatsapp ? 'translate-x-6' : 'translate-x-0.5'\r\n                      }`}\r\n                    />\r\n                  </button>\r\n                </div>\r\n\r\n                {enableWhatsapp && (\r\n                  <motion.div\r\n                    initial={{ height: 0, opacity: 0 }}\r\n                    animate={{ height: 'auto', opacity: 1 }}\r\n                  >\r\n                    <input\r\n                      type=\"tel\"\r\n                      value={whatsappNumber}\r\n                      onChange={(e) => setWhatsappNumber(e.target.value)}\r\n                      placeholder=\"Your WhatsApp number (with country code)\"\r\n                      className=\"w-full px-4 py-3 bg-black/30 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-green-500/50\"\r\n                    />\r\n                    <p className=\"text-xs text-gray-500 mt-2\">\r\n                      e.g., +1234567890 (include country code)\r\n                    </p>\r\n                  </motion.div>\r\n                )}\r\n              </div>\r\n\r\n              {/* In-app messaging note */}\r\n              <div className=\"p-4 bg-primary/5 border border-primary/20 rounded-xl\">\r\n                <div className=\"flex items-start gap-3\">\r\n                  <FiCheck className=\"text-primary mt-0.5\" size={18} />\r\n                  <div>\r\n                    <p className=\"text-white text-sm font-medium\">In-app messaging always available</p>\r\n                    <p className=\"text-xs text-gray-400\">Buyers can always contact you through the app's built-in chat</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Submit */}\r\n              <button\r\n                type=\"submit\"\r\n                disabled={submitting}\r\n                className=\"w-full py-4 bg-gradient-to-r from-primary to-red-500 text-white font-bold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg hover:shadow-primary/20 transition-all flex items-center justify-center gap-2\"\r\n              >\r\n                {submitting ? (\r\n                  <>\r\n                    <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n                    Posting...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <FiCheck size={20} />\r\n                    Post Listing\r\n                  </>\r\n                )}\r\n              </button>\r\n            </form>\r\n          </motion.div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}}]
}